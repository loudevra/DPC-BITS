<UserControl x:Class="DPC.Views.Project.AddProject2"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             FontFamily="{StaticResource Lexend}"
             Background="#D9D9D9">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Sticky Header -->
        <Border Grid.Row="0" Background="#D9D9D9" Padding="20,10" Panel.ZIndex="1">
            <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                <materialDesign:PackIcon Kind="FilePlusOutline" Width="40" Height="40" Margin="0,0,15,0" Foreground="#474747" />
                <TextBlock Text="Add Project" FontSize="35" FontWeight="Bold" VerticalAlignment="Center" Foreground="#474747" />
            </StackPanel>
        </Border>

        <!-- Scrollable Main Content -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled" Style="{StaticResource ModernScrollViewerStyle}">
            <StackPanel Margin="20,10,20,20" Width="800">
                <!-- Form Fields -->
                <StackPanel>

                    <!-- Customer -->
                    <TextBlock Text="Customer:" Margin="0,10,0,10" FontWeight="SemiBold" Foreground="#474747"/>
                    <Border Style="{StaticResource RoundedBorderStyle}" Width="768">
                        <TextBox x:Name="txtCustomer" Height="30" Margin="0,0,0,5" Style="{StaticResource RoundedTextboxStyle}" Width="735"/>
                    </Border>

                    <!-- Budget -->
                    <TextBlock Text="Budget:" Margin="0,10,0,10" FontWeight="SemiBold" Foreground="#474747"/>
                    <ComboBox x:Name="cmbBudget" Style="{StaticResource RoundedComboBoxStyle}" Width="773" Height="40" SelectedIndex="0" Margin="0,0,0,10"/>

                    <!-- Dates and Options -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <!-- Start Date -->
                        <TextBlock Text="Start Date:" Margin="0,0,0,10" FontWeight="SemiBold" Foreground="#474747" Grid.Column="0" Grid.Row="0"/>
                        <Border Style="{StaticResource RoundedBorderStyle}" Margin="10,20,10,-16" Grid.Column="0" Grid.Row="0">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="35"/>
                                </Grid.ColumnDefinitions>

                                <!-- Hidden Start Date Picker -->
                                <DatePicker x:Name="StartDatePicker"
                    Style="{StaticResource SingleDatePickerStyle}"
                    SelectedDateChanged="StartDatePicker_SelectedDateChanged"
                    Opacity="0"
                    IsHitTestVisible="False"/>

                                <!-- Calendar Icon -->
                                <materialDesign:PackIcon Kind="Calendar"
                                 Width="25" Height="25"
                                 Foreground="#474747"
                                 VerticalAlignment="Center"
                                 HorizontalAlignment="Left"
                                 Margin="0,0,0,0"
                                 Grid.Column="1"/>

                                <!-- Date Button -->
                                <Button x:Name="StartDateButton"
                Grid.Column="0"
                Style="{StaticResource DateButtonStyle}"
                Click="StartDateButton_Click"
                Width="Auto"
                Margin="10,0,25,0">
                                    <TextBlock Margin="0,0,5,0" Height="14">
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="Text" Value="{Binding ElementName=StartDatePicker, Path=SelectedDate, StringFormat='{}{0:MMM dd, yyyy}'}"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding ElementName=StartDatePicker, Path=SelectedDate}" Value="{x:Null}">
                                                        <Setter Property="Text" Value="Select date"/>
                                                        <Setter Property="Foreground" Value="#999"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>
                                </Button>
                            </Grid>
                        </Border>

                        <!-- Due Date -->
                        <TextBlock Text="Due Date:" Margin="0,0,0,10" FontWeight="SemiBold" Foreground="#474747" Grid.Column="1" Grid.Row="0"/>
                        <Border Style="{StaticResource RoundedBorderStyle}" Margin="10,20,10,-16" Grid.Column="1" Grid.Row="0">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="35"/>
                                </Grid.ColumnDefinitions>

                                <!-- Hidden Due Date Picker -->
                                <DatePicker x:Name="DueDatePicker"
                    Style="{StaticResource SingleDatePickerStyle}"
                    SelectedDateChanged="DueDatePicker_SelectedDateChanged"
                    Opacity="0"
                    IsHitTestVisible="False"/>

                                <!-- Calendar Icon -->
                                <materialDesign:PackIcon Grid.Column="1"
                                 Kind="Calendar"
                                 Width="25" Height="25"
                                 Foreground="#474747"
                                 HorizontalAlignment="Left"
                                 VerticalAlignment="Center"
                                 Margin="0,0,0,0"/>

                                <!-- Date Button -->
                                <Button x:Name="DueDateButton"
                Grid.Column="0"
                Style="{StaticResource DateButtonStyle}"
                Click="DueDateButton_Click"
                Width="Auto"
                Margin="10,0,25,0">
                                    <TextBlock Margin="0,0,5,0" Height="14">
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="Text" Value="{Binding ElementName=DueDatePicker, Path=SelectedDate, StringFormat='{}{0:MMM dd, yyyy}'}"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding ElementName=DueDatePicker, Path=SelectedDate}" Value="{x:Null}">
                                                        <Setter Property="Text" Value="Select date"/>
                                                        <Setter Property="Foreground" Value="#999"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>
                                </Button>
                            </Grid>
                        </Border>

                        <!-- Radio Options -->
                        <Button Style="{StaticResource RoundedButtonStyle}" Grid.Column="0" Margin="10,30,10,-16" Grid.Row="2">
                            <RadioButton x:Name="RadBtnDueDateOnly" Margin="10" BorderBrush="#474747" BorderThickness="1.5"
                                         GroupName="CalculationMode" IsChecked="True">
                                <TextBlock Text="Due Date Only" FontSize="14" FontWeight="SemiBold" Foreground="#474747"/>
                            </RadioButton>
                        </Button>
                        <Button Style="{StaticResource RoundedButtonStyle}" Grid.Column="1" Margin="10,30,10,-16" Grid.Row="2">
                            <RadioButton x:Name="RadBtnStartDueDate" Margin="10" BorderBrush="#474747" BorderThickness="1.5"
                                         GroupName="CalculationMode">
                                <TextBlock Text="Start to Due Date" FontSize="14" FontWeight="SemiBold" Foreground="#474747"/>
                            </RadioButton>
                        </Button>

                        <!-- Calendar Link -->
                        <CheckBox Content="Link to Calendar"
                                  Margin="0,30,0,0"
                                  FontFamily="Lexend"
                                  Foreground="#474747"
                                  FontWeight="SemiBold"
                                  Grid.ColumnSpan="2"
                                  Grid.Row="3"
                                  VerticalContentAlignment="Center"/>
                    </Grid>

                    <!-- Assign -->
                    <TextBlock Text="Assign to:" Margin="0,20,0,10" FontWeight="SemiBold" Foreground="#474747"/>
                    <ComboBox x:Name="cmbAssign" Style="{StaticResource RoundedComboBoxStyle}" Width="773" Height="40" SelectedIndex="0" Margin="0,0,0,10"/>

                    <!-- Phase -->
                    <TextBlock Text="Phase:" Margin="0,0,0,10" FontWeight="SemiBold" Foreground="#474747"/>
                    <Border Style="{StaticResource RoundedBorderStyle}" Width="768">
                        <TextBox x:Name="txtPhase" Height="30" Margin="0,0,0,5" Style="{StaticResource RoundedTextboxStyle}" Width="735"/>
                    </Border>

                    <!-- Navigation Buttons -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Back -->
                        <Button Content="&lt; Back"
                                Width="140" Height="38" Margin="0,24,0,0"
                                FontSize="16"
                                Background="#8a8a8a"
                                Foreground="White"
                                BorderBrush="Transparent"
                                Grid.Column="0"
                                HorizontalContentAlignment="Center">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}" CornerRadius="20" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" Margin="10,0"/>
                                    </Border>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>

                        <!-- Next -->
                        <Button Content="Next  >"
                                Width="140" Height="38" Margin="0,24,15,0"
                                FontSize="16"
                                Background="#444"
                                Foreground="White"
                                Click="NavigateToAddProj3"
                                BorderBrush="Transparent"
                                Grid.Column="1"
                                HorizontalContentAlignment="Center">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}" CornerRadius="20" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" Margin="10,0"/>
                                    </Border>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                    </Grid>
                </StackPanel>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</UserControl>
